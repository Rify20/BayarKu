(() => {
  // Cari elemen % (yang isinya "65%")
  const percentEl = Array.from(document.querySelectorAll("p")).find((p) =>
    (p.textContent || "").trim().match(/^\d+%$/)
  );

  // Cari progress bar inner (div bg-primary dengan style width: xx%)
  const barEl = Array.from(document.querySelectorAll("div")).find((d) => {
    if (!d.classList.contains("bg-primary")) return false;
    const style = (d.getAttribute("style") || "").replace(/\s+/g, "").toLowerCase();
    return style.includes("width:");
  });

  // Fail-safe: jangan error kalau struktur berubah
  if (!percentEl || !barEl) return;

  // Ambil angka awal dari HTML (default 65)
  const startVal = (() => {
    const n = parseInt((percentEl.textContent || "0").replace(/\D/g, ""), 10);
    return Number.isFinite(n) ? n : 0;
  })();

  const endVal = 100;
  const durationMs = 3000; // 3 detik
  const startTime = performance.now();

  function render(value) {
    const v = Math.max(0, Math.min(100, value));
    percentEl.textContent = `${v}%`;
    barEl.style.width = `${v}%`;
  }

  function animate(now) {
    const t = Math.min(1, (now - startTime) / durationMs);
    // smooth ease
    const eased = 1 - Math.pow(1 - t, 3);
    const value = Math.round(startVal + (endVal - startVal) * eased);
    render(value);

    if (t < 1) {
      requestAnimationFrame(animate);
    } else {
      // selesai -> pindah ke login.html
      // (file login nanti kamu kasih desainnya)
      window.location.href = "./login.html";
    }
  }

  // Start animation
  render(startVal);
  requestAnimationFrame(animate);
})();
